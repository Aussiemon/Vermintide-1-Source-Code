require("scripts/settings/attachment_node_linking")

local items = {
	wpn_skaven_sword_01 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_01",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_02 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_02",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_03 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_03",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_04 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_04",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_05 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_05",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_06 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_06",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_07 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_07",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_08 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_08",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_16 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_16",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_17 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_17",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_18 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_18",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_19 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_19",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_20 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_20",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_21 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_21",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_22 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_22",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_23 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_23",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_sword_24 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_sword_24",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_mace_31 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_mace_31",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_mace_32 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_mace_32",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_mace_33 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_mace_33",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_mace_34 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_mace_34",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_mace_35 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_mace_35",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_mace_36 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_mace_36",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_mace_37 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_mace_37",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_spear_25 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_spear_25",
		attachment_node_linking = AttachmentNodeLinking.ai_spear
	},
	wpn_skaven_spear_27 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_spear_27",
		attachment_node_linking = AttachmentNodeLinking.ai_spear
	},
	wpn_skaven_spear_28 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_spear_28",
		attachment_node_linking = AttachmentNodeLinking.ai_spear
	},
	wpn_skaven_spear_29 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_spear_29",
		attachment_node_linking = AttachmentNodeLinking.ai_spear
	},
	wpn_skaven_spear_30 = {
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_spear_30",
		attachment_node_linking = AttachmentNodeLinking.ai_spear
	},
	wpn_skaven_shield_38 = {
		drop_on_hit = true,
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_shield_38",
		attachment_node_linking = AttachmentNodeLinking.ai_shield
	},
	wpn_skaven_shield_39 = {
		drop_on_hit = true,
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_shield_39",
		attachment_node_linking = AttachmentNodeLinking.ai_shield
	},
	wpn_skaven_shield_40 = {
		drop_on_hit = true,
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_shield_40",
		attachment_node_linking = AttachmentNodeLinking.ai_shield
	},
	wpn_skaven_shield_42 = {
		drop_on_hit = true,
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_shield_42",
		attachment_node_linking = AttachmentNodeLinking.ai_shield
	},
	wpn_skaven_shield_44 = {
		drop_on_hit = true,
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_shield_44",
		attachment_node_linking = AttachmentNodeLinking.ai_shield
	},
	wpn_skaven_shield_45 = {
		drop_on_hit = true,
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_shield_45",
		attachment_node_linking = AttachmentNodeLinking.ai_shield
	},
	wpn_skaven_shield_46 = {
		drop_on_hit = true,
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_shield_46",
		attachment_node_linking = AttachmentNodeLinking.ai_shield
	},
	wpn_skaven_halberd_41 = {
		drop_on_hit = true,
		unit_name = "units/weapons/enemy/wpn_skaven_set/wpn_skaven_halberd_41",
		attachment_node_linking = AttachmentNodeLinking.ai_spear
	},
	wpn_torch = {
		unit_name = "units/weapons/enemy/wpn_torch/wpn_torch",
		attachment_node_linking = AttachmentNodeLinking.ai_sword
	},
	wpn_skaven_packmaster_claw = {
		unit_name = "units/weapons/enemy/wpn_skaven_packmaster_claw/wpn_skaven_packmaster_claw",
		attachment_node_linking = AttachmentNodeLinking.ai_packmaster_claw
	},
	wpn_loot_rat_sack = {
		unit_name = "units/weapons/enemy/wpn_skaven_looter_sack/wpn_skaven_looter_sack",
		drop_unit_name = "units/weapons/enemy/wpn_skaven_looter_sack/wpn_skaven_looter_sack_static",
		attachment_node_linking = AttachmentNodeLinking.ai_looter_sack
	},
	wpn_ratlinggun = {
		unit_extension_template = "ai_weapon_unit",
		unit_name = "units/weapons/enemy/wpn_skaven_ratlinggun/wpn_skaven_ratlinggun",
		attachment_node_linking = AttachmentNodeLinking.ai_ratlinggun,
		extension_init_data = {
			weapon_system = {
				weapon_template = "ratling_gun"
			}
		}
	}
}
local item_categories = {
	sword = {
		items.wpn_skaven_sword_01,
		items.wpn_skaven_sword_02,
		items.wpn_skaven_sword_03,
		items.wpn_skaven_sword_04,
		items.wpn_skaven_sword_05,
		items.wpn_skaven_sword_06,
		items.wpn_skaven_sword_07,
		items.wpn_skaven_sword_08,
		items.wpn_skaven_sword_16,
		items.wpn_skaven_sword_17,
		items.wpn_skaven_sword_18,
		items.wpn_skaven_sword_19,
		items.wpn_skaven_sword_20,
		items.wpn_skaven_sword_21,
		items.wpn_skaven_sword_22,
		items.wpn_skaven_sword_23,
		items.wpn_skaven_sword_24,
		items.wpn_skaven_mace_31,
		items.wpn_skaven_mace_32,
		items.wpn_skaven_mace_33,
		items.wpn_skaven_mace_34,
		items.wpn_skaven_mace_35,
		items.wpn_skaven_mace_35,
		items.wpn_skaven_mace_35,
		items.wpn_skaven_mace_35,
		items.wpn_skaven_mace_35,
		items.wpn_skaven_mace_36,
		items.wpn_skaven_mace_36,
		items.wpn_skaven_mace_36,
		items.wpn_skaven_mace_36,
		items.wpn_skaven_mace_36,
		items.wpn_skaven_mace_37,
		items.wpn_torch,
		items.wpn_torch,
		items.wpn_torch,
		items.wpn_torch,
		items.wpn_torch
	},
	spear = {
		items.wpn_skaven_spear_25,
		items.wpn_skaven_spear_27,
		items.wpn_skaven_spear_28,
		items.wpn_skaven_spear_29,
		items.wpn_skaven_spear_30
	},
	halberd = {
		items.wpn_skaven_halberd_41
	},
	shield = {
		items.wpn_skaven_shield_38,
		items.wpn_skaven_shield_39,
		items.wpn_skaven_shield_40,
		items.wpn_skaven_shield_42,
		items.wpn_skaven_shield_44,
		items.wpn_skaven_shield_45,
		items.wpn_skaven_shield_46
	},
	packmaster_claw = {
		items.wpn_skaven_packmaster_claw
	},
	loot_rat_sack = {
		items.wpn_loot_rat_sack
	},
	ratlinggun = {
		items.wpn_ratlinggun
	}
}
InventoryConfigurations = {
	empty = {
		anim_state_event = "to_sword",
		items = {}
	},
	sword = {
		enemy_hit_sound = "sword",
		anim_state_event = "to_sword",
		items = {
			item_categories.sword
		}
	},
	spear = {
		enemy_hit_sound = "spear",
		anim_state_event = "to_spear",
		items = {
			item_categories.spear
		}
	},
	halberd = {
		enemy_hit_sound = "spear",
		anim_state_event = "to_spear",
		items = {
			item_categories.halberd
		}
	},
	sword_and_shield = {
		enemy_hit_sound = "sword",
		anim_state_event = "to_shield_1h",
		items = {
			item_categories.sword,
			item_categories.shield
		}
	},
	pack_master = {
		items = {
			item_categories.packmaster_claw
		}
	},
	loot_rat_sack = {
		items = {
			item_categories.loot_rat_sack
		}
	},
	ratlinggun = {
		enemy_hit_sound = "bullet",
		items = {
			item_categories.ratlinggun
		}
	},
	rat_ogre = {
		enemy_hit_sound = "melee",
		items = {}
	},
	gutter_runner = {
		enemy_hit_sound = "dagger",
		items = {}
	}
}
AIInventoryTemplates = {}
local melee_configurations = {
	"sword",
	"spear"
}

AIInventoryTemplates.random_melee = function ()
	local index = math.random(1, #melee_configurations)
	local config_name = melee_configurations[index]

	return config_name
end

AIInventoryTemplates.default = function ()
	return AIInventoryTemplates.random_melee()
end

for category_name, category in pairs(item_categories) do
	category.count = #category
	category.name = category_name
end

for config_name, config in pairs(InventoryConfigurations) do
	config.items_n = #config.items

	assert(AIInventoryTemplates[config_name] == nil, "Can't override configuration based templates")

	AIInventoryTemplates[config_name] = function ()
		return config_name
	end
end

return
