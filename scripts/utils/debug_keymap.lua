local keyboard_debug_keymap = {
	f1 = {
		input_mappings = {
			{
				"keyboard",
				"f1",
				"pressed"
			}
		}
	},
	f2 = {
		input_mappings = {
			{
				"keyboard",
				"f2",
				"pressed"
			}
		}
	},
	f3 = {
		input_mappings = {
			{
				"keyboard",
				"f3",
				"pressed"
			}
		}
	},
	f4 = {
		input_mappings = {
			{
				"keyboard",
				"f4",
				"pressed"
			}
		}
	},
	f5 = {
		input_mappings = {
			{
				"keyboard",
				"f5",
				"pressed"
			}
		}
	},
	f6 = {
		input_mappings = {
			{
				"keyboard",
				"f6",
				"pressed"
			}
		}
	},
	f7 = {
		input_mappings = {
			{
				"keyboard",
				"f7",
				"pressed"
			}
		}
	},
	f8 = {
		input_mappings = {
			{
				"keyboard",
				"f8",
				"pressed"
			}
		}
	},
	f9 = {
		input_mappings = {
			{
				"keyboard",
				"f9",
				"pressed"
			}
		}
	},
	f10 = {
		input_mappings = {
			{
				"keyboard",
				"f10",
				"pressed"
			}
		}
	},
	f11 = {
		input_mappings = {
			{
				"keyboard",
				"f11",
				"pressed"
			}
		}
	},
	f12 = {
		input_mappings = {
			{
				"keyboard",
				"f12",
				"pressed"
			}
		}
	},
	["page up"] = {
		input_mappings = {
			{
				"keyboard",
				"page up",
				"pressed"
			}
		}
	},
	["page down"] = {
		input_mappings = {
			{
				"keyboard",
				"page down",
				"pressed"
			}
		}
	},
	home = {
		input_mappings = {
			{
				"keyboard",
				"home",
				"pressed"
			}
		}
	},
	end = {
		input_mappings = {
			{
				"keyboard",
				"end",
				"pressed"
			}
		}
	},
	["left ctrl"] = {
		input_mappings = {
			{
				"keyboard",
				"left ctrl",
				"held"
			}
		}
	},
	["left shift"] = {
		input_mappings = {
			{
				"keyboard",
				"left shift",
				"held"
			}
		}
	},
	["right ctrl"] = {
		input_mappings = {
			{
				"keyboard",
				"left ctrl",
				"held"
			}
		}
	},
	["left alt"] = {
		input_mappings = {
			{
				"keyboard",
				"left alt",
				"held"
			}
		}
	},
	right_key = {
		input_mappings = {
			{
				"keyboard",
				"right",
				"pressed"
			}
		}
	},
	left_key = {
		input_mappings = {
			{
				"keyboard",
				"left",
				"pressed"
			}
		}
	},
	up_key = {
		input_mappings = {
			{
				"keyboard",
				"up",
				"held"
			}
		}
	},
	down_key = {
		input_mappings = {
			{
				"keyboard",
				"down",
				"held"
			}
		}
	},
	enter_key = {
		input_mappings = {
			{
				"keyboard",
				"enter",
				"pressed"
			}
		}
	},
	backspace = {
		input_mappings = {
			{
				"keyboard",
				"backspace",
				"pressed"
			}
		}
	},
	numpad_plus = {
		input_mappings = {
			{
				"keyboard",
				"numpad +",
				"pressed"
			}
		}
	},
	numpad_minus = {
		input_mappings = {
			{
				"keyboard",
				"num -",
				"pressed"
			}
		}
	},
	a = {
		input_mappings = {
			{
				"keyboard",
				"a",
				"pressed"
			}
		}
	},
	b = {
		input_mappings = {
			{
				"keyboard",
				"b",
				"pressed"
			}
		}
	},
	c = {
		input_mappings = {
			{
				"keyboard",
				"c",
				"pressed"
			}
		}
	},
	d = {
		input_mappings = {
			{
				"keyboard",
				"d",
				"pressed"
			}
		}
	},
	e = {
		input_mappings = {
			{
				"keyboard",
				"e",
				"pressed"
			}
		}
	},
	f = {
		input_mappings = {
			{
				"keyboard",
				"f",
				"pressed"
			}
		}
	},
	g = {
		input_mappings = {
			{
				"keyboard",
				"g",
				"pressed"
			}
		}
	},
	h = {
		input_mappings = {
			{
				"keyboard",
				"h",
				"pressed"
			}
		}
	},
	h_held = {
		input_mappings = {
			{
				"keyboard",
				"h",
				"held"
			}
		}
	},
	i = {
		input_mappings = {
			{
				"keyboard",
				"i",
				"pressed"
			}
		}
	},
	j = {
		input_mappings = {
			{
				"keyboard",
				"j",
				"pressed"
			}
		}
	},
	k = {
		input_mappings = {
			{
				"keyboard",
				"k",
				"pressed"
			}
		}
	},
	l = {
		input_mappings = {
			{
				"keyboard",
				"l",
				"pressed"
			}
		}
	},
	m = {
		input_mappings = {
			{
				"keyboard",
				"m",
				"pressed"
			}
		}
	},
	n = {
		input_mappings = {
			{
				"keyboard",
				"n",
				"pressed"
			}
		}
	},
	o = {
		input_mappings = {
			{
				"keyboard",
				"o",
				"pressed"
			}
		}
	},
	p = {
		input_mappings = {
			{
				"keyboard",
				"p",
				"pressed"
			}
		}
	},
	q = {
		input_mappings = {
			{
				"keyboard",
				"q",
				"pressed"
			}
		}
	},
	r = {
		input_mappings = {
			{
				"keyboard",
				"r",
				"pressed"
			}
		}
	},
	s = {
		input_mappings = {
			{
				"keyboard",
				"s",
				"pressed"
			}
		}
	},
	t = {
		input_mappings = {
			{
				"keyboard",
				"t",
				"pressed"
			}
		}
	},
	u = {
		input_mappings = {
			{
				"keyboard",
				"u",
				"pressed"
			}
		}
	},
	v = {
		input_mappings = {
			{
				"keyboard",
				"v",
				"pressed"
			}
		}
	},
	w = {
		input_mappings = {
			{
				"keyboard",
				"w",
				"pressed"
			}
		}
	},
	x = {
		input_mappings = {
			{
				"keyboard",
				"x",
				"pressed"
			}
		}
	},
	y = {
		input_mappings = {
			{
				"keyboard",
				"y",
				"pressed"
			}
		}
	},
	z = {
		input_mappings = {
			{
				"keyboard",
				"z",
				"pressed"
			}
		}
	},
	esc = {
		input_mappings = {
			{
				"keyboard",
				"esc",
				"pressed"
			}
		}
	},
	activate_chat_input = {
		input_mappings = {
			{
				"keyboard",
				"y",
				"pressed"
			}
		}
	},
	console_open_key = {
		input_mappings = {
			{
				"keyboard",
				"end",
				"pressed"
			}
		}
	},
	console_mod_key = {
		combination_type = "or",
		input_mappings = {
			{
				"keyboard",
				"left ctrl",
				"held"
			},
			{
				"keyboard",
				"right ctrl",
				"held"
			}
		}
	},
	console_favorite_key = {
		input_mappings = {
			{
				"keyboard",
				"f",
				"pressed"
			}
		}
	},
	console_search_key = {
		input_mappings = {
			{
				"keyboard",
				"backspace",
				"pressed"
			}
		}
	}
}
local synergy_keyboard_debug_keymap = nil

if Application.build() == "dev" or Application.build() == "debug" then
	synergy_keyboard_debug_keymap = {}

	for k, v in pairs(keyboard_debug_keymap) do
		local input_mappings = v.input_mappings
		local mapping = input_mappings[1]
		synergy_keyboard_debug_keymap[k] = {
			input_mappings = {
				{
					"synergy_keyboard",
					mapping[2],
					mapping[3]
				}
			}
		}
	end
end

local mouse_debug_keymap = {
	cursor = {
		input_mappings = {
			{
				"mouse",
				"cursor",
				"axis"
			}
		}
	},
	look = {
		input_mappings = {
			{
				"mouse",
				"mouse",
				"axis"
			}
		}
	},
	mouse_left_held = {
		input_mappings = {
			{
				"mouse",
				"left",
				"held"
			}
		}
	},
	mouse_middle_held = {
		input_mappings = {
			{
				"mouse",
				"middle",
				"held"
			}
		}
	},
	mouse_right_held = {
		input_mappings = {
			{
				"mouse",
				"right",
				"held"
			}
		}
	}
}
local gamepad_xbox_debug_keymap = {
	n_switch = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"left_thumb",
				"held"
			},
			{
				"gamepad",
				"right_trigger",
				"held"
			},
			{
				"gamepad",
				"d_left",
				"pressed"
			}
		}
	},
	n = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"left_thumb",
				"held"
			},
			{
				"gamepad",
				"right_trigger",
				"held"
			},
			{
				"gamepad",
				"d_up",
				"pressed"
			}
		}
	},
	o = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"left_thumb",
				"held"
			},
			{
				"gamepad",
				"left_trigger",
				"held"
			},
			{
				"gamepad",
				"d_left",
				"pressed"
			}
		}
	},
	p = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"left_thumb",
				"held"
			},
			{
				"gamepad",
				"left_trigger",
				"held"
			},
			{
				"gamepad",
				"d_up",
				"pressed"
			}
		}
	},
	i = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"left_thumb",
				"held"
			},
			{
				"gamepad",
				"d_down",
				"pressed"
			}
		}
	},
	c = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"left_thumb",
				"held"
			},
			{
				"gamepad",
				"d_up",
				"pressed"
			}
		}
	},
	exclusive_right_key = {
		input_mappings = {
			{
				"gamepad",
				"d_right",
				"pressed"
			}
		}
	},
	right_key = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"left_thumb",
				"held"
			},
			{
				"gamepad",
				"d_right",
				"pressed"
			}
		}
	},
	left_key = {
		input_mappings = {
			{
				"gamepad",
				"d_left",
				"pressed"
			}
		}
	},
	up_key = {
		input_mappings = {
			{
				"gamepad",
				"d_up",
				"held"
			}
		}
	},
	down_key = {
		input_mappings = {
			{
				"gamepad",
				"d_down",
				"held"
			}
		}
	}
}
local synergy_gamepad_xbox_debug_keymap = {
	["left ctrl"] = {
		input_mappings = {
			{
				"gamepad",
				"left_trigger",
				"held"
			}
		}
	},
	["left shift"] = {
		input_mappings = {
			{
				"gamepad",
				"right_trigger",
				"held"
			}
		}
	},
	exclusive_right_key = {
		input_mappings = {
			{
				"gamepad",
				"d_right",
				"pressed"
			}
		}
	},
	right_key = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"left_thumb",
				"held"
			},
			{
				"gamepad",
				"d_right",
				"pressed"
			}
		}
	},
	left_key = {
		input_mappings = {
			{
				"gamepad",
				"d_left",
				"pressed"
			}
		}
	},
	up_key = {
		input_mappings = {
			{
				"gamepad",
				"d_up",
				"held"
			}
		}
	},
	down_key = {
		input_mappings = {
			{
				"gamepad",
				"d_down",
				"held"
			}
		}
	}
}
local gamepad_ps4_debug_keymap = {
	n_switch = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"right",
				"held"
			},
			{
				"gamepad",
				"r2",
				"held"
			},
			{
				"gamepad",
				"left",
				"pressed"
			}
		}
	},
	n = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"right",
				"held"
			},
			{
				"gamepad",
				"r2",
				"held"
			},
			{
				"gamepad",
				"up",
				"pressed"
			}
		}
	},
	o = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"right",
				"held"
			},
			{
				"gamepad",
				"l2",
				"held"
			},
			{
				"gamepad",
				"left",
				"pressed"
			}
		}
	},
	p = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"right",
				"held"
			},
			{
				"gamepad",
				"l2",
				"held"
			},
			{
				"gamepad",
				"up",
				"pressed"
			}
		}
	},
	i = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"right",
				"held"
			},
			{
				"gamepad",
				"down",
				"pressed"
			}
		}
	},
	c = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"right",
				"held"
			},
			{
				"gamepad",
				"up",
				"pressed"
			}
		}
	},
	exclusive_right_key = {
		input_mappings = {
			{
				"gamepad",
				"right",
				"pressed"
			}
		}
	},
	right_key = {
		combination_type = "and",
		input_mappings = {
			{
				"gamepad",
				"l3",
				"held"
			},
			{
				"gamepad",
				"right",
				"pressed"
			}
		}
	},
	left_key = {
		input_mappings = {
			{
				"gamepad",
				"left",
				"pressed"
			}
		}
	},
	up_key = {
		input_mappings = {
			{
				"gamepad",
				"up",
				"held"
			}
		}
	},
	down_key = {
		input_mappings = {
			{
				"gamepad",
				"down",
				"held"
			}
		}
	}
}

local function merge_keymap(dest_keymap, source_keymap, xbox_merge)
	local platform = Application.platform()

	for key, mapdata in pairs(source_keymap) do
		if (platform == "xb1" or platform == "ps4") and xbox_merge then
			dest_keymap[key] = mapdata
		elseif dest_keymap[key] then
			assert(dest_keymap[key].combination_type == nil or dest_keymap[key].combination_type == "or", "wrongly configured key %s", key)

			dest_keymap[key].combination_type = "or"
			local dest_input_mappings = dest_keymap[key].input_mappings

			for i = 1, #mapdata.input_mappings, 1 do
				dest_input_mappings[#dest_input_mappings + 1] = mapdata.input_mappings[i]
			end
		else
			dest_keymap[key] = mapdata
		end
	end

	return 
end

DebugKeymap = {}
local DebugKeymap = DebugKeymap

if Application.platform() == "win32" then
	merge_keymap(DebugKeymap, keyboard_debug_keymap)

	if Application.build() == "dev" or Application.build() == "debug" then
		merge_keymap(DebugKeymap, synergy_keyboard_debug_keymap)
	end

	merge_keymap(DebugKeymap, mouse_debug_keymap)
elseif Application.platform() == "ps4" then
	if script_data.synergy ~= nil then
		merge_keymap(DebugKeymap, keyboard_debug_keymap)

		if Application.build() == "dev" or Application.build() == "debug" then
			merge_keymap(DebugKeymap, synergy_keyboard_debug_keymap)
		end
	else
		merge_keymap(DebugKeymap, keyboard_debug_keymap)
		merge_keymap(DebugKeymap, gamepad_ps4_debug_keymap, true)
	end
elseif Application.platform() == "xb1" then
	if script_data.synergy ~= nil then
		merge_keymap(DebugKeymap, keyboard_debug_keymap)

		if Application.build() == "dev" or Application.build() == "debug" then
			merge_keymap(DebugKeymap, synergy_keyboard_debug_keymap)
			merge_keymap(DebugKeymap, synergy_gamepad_xbox_debug_keymap, true)
		end
	else
		merge_keymap(DebugKeymap, keyboard_debug_keymap)
		merge_keymap(DebugKeymap, gamepad_xbox_debug_keymap, true)
	end
end

return 
